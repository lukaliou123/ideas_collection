# 迭代日志

本文档记录项目的开发迭代过程，包括每个阶段的计划、实现和完成情况。

## MVP开发步骤

### 阶段1: 基础架构和数据获取 (估计2天)

1. **项目设置** ✅
   - 创建项目目录结构
   - 设置虚拟环境和依赖管理
   - 创建基础配置文件

2. **数据库模型实现** ✅
   - 使用SQLAlchemy实现数据模型
   - 创建数据库迁移脚本
   - 实现基础CRUD操作

3. **HackerNews API集成** ✅
   - 实现HN API客户端
   - 获取和过滤"Show HN"帖子
   - 存储到数据库

### 阶段2: 爬虫和内容处理 (估计3天)

4. **Indie Hackers爬虫** ⏳
   - 实现网页爬取逻辑
   - 提取帖子和相关元数据
   - 实现爬虫限速和错误处理

5. **定时任务系统** ✅
   - 设置APScheduler
   - 实现各数据源的定时抓取任务
   - 添加日志和监控

6. **内容去重和规范化** ⏳
   - 实现URL和内容去重机制
   - 标准化不同来源的数据格式

### 阶段3: AI集成和内容分析 (估计2天)

7. **OpenAI API集成**
   - 设置API访问
   - 创建提示模板
   - 实现错误处理和重试机制

8. **内容分析模块**
   - 实现内容摘要生成
   - 提取产品信息(问题、解决方案、目标受众等)
   - 自动标签生成

### 阶段4: Web界面和部署 (估计3天)

9. **FastAPI后端**
   - 实现REST API端点
   - 添加过滤和分页功能
   - 实现简单认证(可选)

10. **简易前端**
    - 实现基本列表和详情页面
    - 添加过滤和搜索功能
    - 响应式设计

11. **部署准备**
    - 创建Docker配置(可选)
    - 编写部署文档
    - 实现基本监控

## 当前迭代：迭代1

### 目标
- 完成内容去重和规范化机制 (阶段2的第6项)
- 解决现有系统中的问题并优化代码

### 计划功能
1. 实现URL和内容去重机制
2. 标准化不同来源的数据格式
3. 修复系统中的已知问题 

## 迭代2 (2025.5.11)

### 目标
- 优化标签系统，提高用户体验和搜索效率
- 改进首页产品展示，提升用户第一印象
- 解决现有产品中的用户体验问题
- 增强AI功能，提高产品分析质量和视觉呈现

### 计划功能
1. **标签优化系统** ⏳
   - 创建预定义标签集合，限制AI只能从固定标签库中选择
   - 实现相似标签自动合并的机制（如"web app"、"webapp"等视为同一标签）
   - 根据产品类别建立标签分类体系
   
2. **首页精选产品展示** ⏳
   - 实现首页展示当日更新中点赞数最高的三个产品帖子
   - 为精选产品使用AI生成对应的产品概念图，增强视觉吸引力
   - 确保精选产品可点击并链接到详情页面
   - 优化产品卡片设计，提供标题、简短描述、来源、日期和关键标签等信息
   - 增加图片展示区域，提升视觉体验
   - 设置每日上午10点随爬虫任务一起自动更新精选产品
   
3. **产品列表排序功能** ⏳
   - 实现后端API对多种排序方式的支持
   - 完善按最新添加（时间顺序）的排序逻辑
   - 添加按热门程度（基于点赞数/评论数）排序的功能
   - 实现按产品名称字母顺序排序的功能
   - 确保前端排序选择能正确发送到后端并接收响应
   - 优化排序性能，特别是在大数据量情况下

4. **AI服务增强与重构** ⏳
   - 使用LangChain框架重构现有AI服务，提高可维护性和扩展性
   - 将AI模型从gpt-3.5-turbo升级到gpt-4.1-nano，提升分析质量并降低成本
   - 实现产品概念图生成功能，使用DALL-E 2(512×512)模型平衡质量和成本
   - 设计缓存和限流机制，控制API调用成本
   - 为未来AI功能扩展(如多帖子分析、智能检索等)搭建基础架构 